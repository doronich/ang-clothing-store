<div>
  <h2>{{'shopcart.form.title'|translate}}</h2>
</div>
<ng-container *ngIf="userLoading; else elseTemplate">
  {{'loading'|translate}}
</ng-container>
<ng-template #elseTemplate>
  <form [formGroup]="form" (submit)="submit($event)">
    <div class="flex-container">
      <!--       <div class="flex-item">
        <div>
          <label>Username* :</label>
          <span *ngIf="user"> {{userDetails.username}}</span>
        </div>
      </div> -->
      <div class="flex-item">
        <div>
          <label>E-mail* :</label>
          <span *ngIf="userDetails"> {{userDetails.email}}</span>
        </div>
      </div>
      <div class="flex-item">
        <div class="row-container">
          <label for="">{{'shopcart.form.name'|translate}}* :</label>
          <input formControlName="name" maxlength="20" type="text" value="" required>
        </div>
      </div>
      <div class="flex-item">
        <div class="row-container">
          <label for="">{{'shopcart.form.phoneNumber'|translate}}* :</label>
          <input formControlName="phone" maxlength="20" type="text" value="" required>
        </div>
      </div>
      <div class="flex-item">
        <div class="row-container">
          <label for="">{{'shopcart.form.address'|translate}} :</label>
          <input formControlName="address" maxlength="50" type="text" value="">
        </div>
      </div>
      <div class="flex-item">
        <div class="row-container">
          <label for="">{{'shopcart.form.comment'|translate}} :</label>
          <input formControlName="comment" maxlength="250" type="text" value="">
        </div>
      </div>
      <div class="flex-item">
        <div class="row-container">
          <label for="">{{'shopcart.form.code'|translate}} :</label>
          <input formControlName="code" maxlength="20" type="text" value="">
          <button class="check-button" [ngClass]="{'valid-code': codeConfirmed}" [disabled]="codeConfirmed" (click)="check($event)">{{!codeConfirmed?('shopcart.form.check'|translate):"Ok"}}</button>
        </div>
      </div>
      <input type="submit" translate [value]="'shopcart.form.confirm' | translate" [disabled]="(form.invalid || checkoutLoading)">

      <div *ngIf="error ==='code'" class="error-message">{{'shopcart.codeerror' | translate}}</div>

      <div *ngIf="error ==='loading'" class="error-message">{{'shopcart.error' | translate}}</div>

    </div>
  </form>
</ng-template>